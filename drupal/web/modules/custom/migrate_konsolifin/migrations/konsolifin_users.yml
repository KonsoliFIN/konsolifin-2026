id: konsolifin_users
label: Migrate users from Drupal 7
migration_tags:
  - KonsoliFIN
migration_group: migrate_konsolifin
source:
  plugin: d7_user
process:
  skip_admin_user:
    plugin: skip_on_value
    method: row
    source: uid
    value: 1
  uid: uid
  name: name
  pass: pass
  mail: mail
  created: created
  access: access
  login: login
  status: status
  timezone: timezone

  init:
    -
      plugin: get
      source: init
  roles:
    -
      plugin: migration_lookup
      migration: konsolifin_user_roles
      source: roles
  field_oikea_nimi:
    -
      plugin: get
      source: field_oikea_nimi
  field_esittely:
    -
      plugin: get
      source: field_esittely
  field_xenforo_id:
    -
      plugin: get
      source: xenforo_auth_xf_uid
  field_slack_id:
    -
      plugin: get
      source: field_slack_user_id

destination:
  plugin: entity:user
